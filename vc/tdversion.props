<?xml version="1.0" encoding="utf-8"?> 
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ImportGroup Label="PropertySheets" />
  
  <PropertyGroup>
    <IsTD>$([System.String]::Copy('$(Configuration)').Contains('TD'))</IsTD>
  </PropertyGroup>

  <Target Name="ValidateTDConfig" BeforeTargets="PrepareForBuild">
    <Error
      Condition="'$(IsTD)' != 'True'"
      Text="Invalid configuration: '$(Configuration)'. The configuration must contain 'TD', e.g. 'Release TD75'." />
  </Target>
  
  <PropertyGroup Condition="'$(IsTD)' == 'True'">
	<TDVersionString>$([System.String]::new('$(Configuration)').Substring($([System.String]::new('$(Configuration)').IndexOf('TD'))))</TDVersionString>
    <TDVersion>$([System.String]::new('$(TDVersionString)').Substring(2))</TDVersion>
	<TDMajorVersion>$([System.String]::new('$(TDVersion)').Substring(0, 1))</TDMajorVersion>
  </PropertyGroup>
  
  <ItemDefinitionGroup />
  <ItemGroup />
</Project>
